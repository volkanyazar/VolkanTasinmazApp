{"version":3,"file":"ngx-cookie-service.umd.min.js","sources":["~/ngx-cookie-service/lib/cookie-service/cookie.service.ts"],"sourcesContent":["// This service is based on the `ng2-cookies` package which sadly is not a service and does\n// not use `DOCUMENT` injection and therefore doesn't work well with AoT production builds.\n// Package: https://github.com/BCJTI/ng2-cookies\n\nimport { Injectable, Inject, PLATFORM_ID, InjectionToken } from '@angular/core';\nimport { DOCUMENT, isPlatformBrowser } from '@angular/common';\n\n@Injectable()\nexport class CookieService {\n  private readonly documentIsAccessible: boolean;\n\n  constructor(\n    // The type `Document` may not be used here. Although a fix is on its way,\n    // we will go with `any` for now to support Angular 2.4.x projects.\n    // Issue: https://github.com/angular/angular/issues/12631\n    // Fix: https://github.com/angular/angular/pull/14894\n    @Inject( DOCUMENT ) private document: any,\n    // Get the `PLATFORM_ID` so we can check if we're in a browser.\n    @Inject( PLATFORM_ID ) private platformId: InjectionToken<Object>,\n  ) {\n    this.documentIsAccessible = isPlatformBrowser( this.platformId );\n  }\n\n  /**\n   * @param name Cookie name\n   * @returns {boolean}\n   */\n  check( name: string ): boolean {\n    if ( !this.documentIsAccessible ) {\n      return false;\n    }\n\n    name = encodeURIComponent( name );\n\n    const regExp: RegExp = this.getCookieRegExp( name );\n    const exists: boolean = regExp.test( this.document.cookie );\n\n    return exists;\n  }\n\n  /**\n   * @param name Cookie name\n   * @returns {any}\n   */\n  get( name: string ): string {\n    if ( this.documentIsAccessible && this.check( name ) ) {\n      name = encodeURIComponent( name );\n\n      const regExp: RegExp = this.getCookieRegExp( name );\n      const result: RegExpExecArray = regExp.exec( this.document.cookie );\n\n      return decodeURIComponent( result[ 1 ] );\n    } else {\n      return '';\n    }\n  }\n\n  /**\n   * @returns {}\n   */\n  getAll(): {} {\n    if ( !this.documentIsAccessible ) {\n      return {};\n    }\n\n    const cookies: {} = {};\n    const document: any = this.document;\n\n    if ( document.cookie && document.cookie !== '' ) {\n      const split: Array<string> = document.cookie.split(';');\n\n      for ( let i = 0; i < split.length; i += 1 ) {\n        const currentCookie: Array<string> = split[ i ].split('=');\n\n        currentCookie[ 0 ] = currentCookie[ 0 ].replace( /^ /, '' );\n        cookies[ decodeURIComponent( currentCookie[ 0 ] ) ] = decodeURIComponent( currentCookie[ 1 ] );\n      }\n    }\n\n    return cookies;\n  }\n\n  /**\n   * @param name     Cookie name\n   * @param value    Cookie value\n   * @param expires  Number of days until the cookies expires or an actual `Date`\n   * @param path     Cookie path\n   * @param domain   Cookie domain\n   * @param secure   Secure flag\n   * @param sameSite OWASP samesite token `Lax`, `None`, or `Strict`. Defaults to `None`\n   */\n  set(\n    name: string,\n    value: string,\n    expires?: number | Date,\n    path?: string,\n    domain?: string,\n    secure?: boolean,\n    sameSite: 'Lax' | 'None' | 'Strict' = 'None'\n  ): void {\n    if ( !this.documentIsAccessible ) {\n      return;\n    }\n\n    let cookieString: string = encodeURIComponent( name ) + '=' + encodeURIComponent( value ) + ';';\n\n    if ( expires ) {\n      if ( typeof expires === 'number' ) {\n        const dateExpires: Date = new Date( new Date().getTime() + expires * 1000 * 60 * 60 * 24 );\n\n        cookieString += 'expires=' + dateExpires.toUTCString() + ';';\n      } else {\n        cookieString += 'expires=' + expires.toUTCString() + ';';\n      }\n    }\n\n    if ( path ) {\n      cookieString += 'path=' + path + ';';\n    }\n\n    if ( domain ) {\n      cookieString += 'domain=' + domain + ';';\n    }\n\n    if ( secure ) {\n      cookieString += 'secure;';\n    }\n\n    cookieString += 'sameSite=' + sameSite + ';';\n\n    this.document.cookie = cookieString;\n  }\n\n  /**\n   * @param name   Cookie name\n   * @param path   Cookie path\n   * @param domain Cookie domain\n   */\n  delete( name: string, path?: string, domain?: string ): void {\n    if ( !this.documentIsAccessible ) {\n      return;\n    }\n\n    this.set( name, '', new Date('Thu, 01 Jan 1970 00:00:01 GMT'), path, domain, undefined, 'Lax' );\n  }\n\n  /**\n   * @param path   Cookie path\n   * @param domain Cookie domain\n   */\n  deleteAll( path?: string, domain?: string ): void {\n    if ( !this.documentIsAccessible ) {\n      return;\n    }\n\n    const cookies: any = this.getAll();\n\n    for ( const cookieName in cookies ) {\n      if ( cookies.hasOwnProperty( cookieName ) ) {\n        this.delete( cookieName, path, domain );\n      }\n    }\n  }\n\n  /**\n   * @param name Cookie name\n   * @returns {RegExp}\n   */\n  private getCookieRegExp( name: string ): RegExp {\n    const escapedName: string = name.replace( /([\\[\\]\\{\\}\\(\\)\\|\\=\\;\\+\\?\\,\\.\\*\\^\\$])/ig, '\\\\$1' );\n\n    return new RegExp( '(?:^' + escapedName + '|;\\\\s*' + escapedName + ')=(.*?)(?:;|$)', 'g' );\n  }\n}\n"],"names":["CookieService","document","platformId","this","documentIsAccessible","isPlatformBrowser","prototype","check","name","encodeURIComponent","getCookieRegExp","test","cookie","get","result","exec","decodeURIComponent","getAll","cookies","split","i","length","currentCookie","replace","set","value","expires","path","domain","secure","sameSite","cookieString","Date","getTime","toUTCString","delete","undefined","deleteAll","cookieName","hasOwnProperty","escapedName","RegExp","decorators","type","Injectable","ctorParameters","Inject","args","DOCUMENT","InjectionToken","PLATFORM_ID"],"mappings":"wTAKA,IAAAA,EAAA,WAQA,SAAAA,EAGaC,EAEAC,GAFAC,KAAbF,SAAaA,EAEAE,KAAbD,WAAaA,EADTC,KAAKC,qBAAuBC,EAAAA,kBAAmBF,KAAKD,mBAMxDF,EAAAM,UAAAC,MAAA,SAIGC,GAHC,QAIKL,KAAMC,uBAAXI,EAIOC,mBAAoBD,GAEJL,KAAKO,gBAAiBF,GACdG,KAAMR,KAAKF,SAASW,UAIvDZ,EAAAM,UAAAO,IAAA,SAKGL,GAJC,GAKKL,KAAKC,sBAAwBD,KAAKI,MAAOC,GAAS,CAJrDA,EAKOC,mBAAoBD,GAH3B,IAMMM,EADiBX,KAAKO,gBAAiBF,GACNO,KAAMZ,KAAKF,SAASW,QAH3D,OAKOI,mBAAoBF,EAAQ,IAHnC,MAKO,IACbd,EAAAM,UAAAW,OAAA,WACI,IAMKd,KAAMC,qBALT,MAMO,GAHT,IAMMc,EAAc,GACdjB,EAAgBE,KAAKF,SAJ3B,GAMKA,EAASW,QAA8B,KAApBX,EAASW,OAH/B,IAFA,IAMMO,EAAuBlB,EAASW,OAAOO,MAAM,KAEzCC,EAAI,EAAGA,EAAID,EAAME,OAAQD,GAAK,EAAI,CAL1C,IAMME,EAA+BH,EAAOC,GAAID,MAAM,KAJtDG,EAMe,GAAMA,EAAe,GAAIC,QAAS,KAAM,IALvDL,EAMSF,mBAAoBM,EAAe,KAAUN,mBAAoBM,EAAe,IAF7F,OAMOJ,GAMXlB,EAAAM,UAAAkB,IAAA,SACIhB,EACAiB,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,QAFJ,IAAAA,IAAIA,EAAJ,QAQS3B,KAAMC,qBANX,CAIA,IAMI2B,EAAuBtB,mBAAoBD,GAAS,IAAMC,mBAAoBgB,GAAU,IAJ5F,GAMKC,EALH,GAMwB,iBAAZA,EAHVK,GAMgB,WAFU,IAAIC,MAAM,IAAIA,MAAOC,UAAsB,IAAVP,EAAiB,GAAK,GAAK,IAE7CQ,cAAgB,SAJzDH,GAMgB,WAAaL,EAAQQ,cAAgB,IAIpDP,IALHI,GAMgB,QAAUJ,EAAO,KAG9BC,IALHG,GAMgB,UAAYH,EAAS,KAGlCC,IALHE,GAMgB,WAHlBA,GAMgB,YAAcD,EAAW,IAJzC3B,KAMKF,SAASW,OAASmB,IAE3B/B,EAAAM,UAAA6B,UAAA,SAMG3B,EAAAmB,EAAAC,GACMzB,KAAMC,sBAFXD,KAMKqB,IAAKhB,EAAM,GAAI,IAAIwB,KAAK,iCAAkCL,EAAMC,EAAQQ,UAAW,QAC5FpC,EAAAM,UAAA+B,UAAA,SAMGV,EAAAC,GALC,GAMKzB,KAAMC,qBANX,CAIA,IAMMc,EAAef,KAAKc,SAJ1B,IAMM,IAAMqB,KAAcpB,EACnBA,EAAQqB,eAAgBD,IAL3BnC,KAMKgC,UAAQG,EAAYX,EAAMC,KASpC5B,EAAHM,UAAAI,gBAAG,SAAAF,GANC,IAOMgC,EAAsBhC,EAAKe,QAAS,yCAA0C,QALpF,OAOO,IAAIkB,OAAQ,OAASD,EAAc,SAAWA,EAAc,iBAAkB,QAtKzF,GAwKOxC,EAAP0C,WAA2C,CAN3C,CAOEC,KAAMC,EAAAA,aAGP5C,EAAD6C,eAAC,WAAA,MAAA,CAJD,CAACF,KAAMP,UAAWM,WAAY,CAAC,CAAEC,KAAMG,EAAAA,OAAQC,KAAM,CAACC,EAAAA,aACtD,CAACL,KAAMM,EAAAA,eAAgBP,WAAY,CAAC,CAAEC,KAAMG,EAAAA,OAAQC,KAAM,CAACG,EAAAA"}
